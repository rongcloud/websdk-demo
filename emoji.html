<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Emoji</title>
</head>
<body>
<link rel="stylesheet" href="./res/rongcloud.css">
<a href="https://github.com/rongcloud/websdk-demo/blob/master/emoji.html" class="get-source">è·å–æºç </a>

<style>
#supportList{
	background:#f5f5f5;
	font-size:12px;
	line-height: 2;
}	
</style>
	
<script src="./lib/RongEmoji-dev.js"></script> 

<h1>Emoji</h1>

<h2>åŸºç¡€APIæ–¹æ³•</h2>
<ol>
	<li>emoji SDK å†…ç½®äº†128ä¸ªemojiè¡¨æƒ…çš„å›¾ç‰‡ï¼Œä¹Ÿå¯è‡ªè¡Œæ‰©å±•é…ç½®</li>
	<li>ç‰¹æ®Šè¯´æ˜ï¼šemojiå›¾ç‰‡æä¾›çš„æ˜¯ä¸€ä¸ªè´¨é‡å¾ˆå·®çš„ç‰ˆæœ¬ï¼Œå› ä¸ºç‰ˆæƒé—®é¢˜ï¼Œå¦‚æœè¦å•†ç”¨ï¼Œè¯·è‡ªè¡Œè§£å†³ç‰ˆæƒé—®é¢˜ã€‚</li>
	<li>æ”¯æŒçš„128ä¸ªè¡¨æƒ…ï¼š<span id="supportList"></span></li>
</ol>



<pre class="code" id="show"></pre>

<script>
//åˆå§‹åŒ–
/*
http://www.fileformat.info/info/unicode/char/1f60e/index.htm
*/ 

//é€šè¿‡è‡ªå®šä¹‰æ‰©å±•ï¼Œè§£å†³å¯¹â€œç‹ç¬‘â€çš„æ”¯æŒ 
var emojiNew = {
	dataSource: {
		"u1F60E":{
			"en":"smiling face with sunglasses",
			"zh":"ç‹ç¬‘",
			"tag":"\uD83D\uDE0E",
			"bp":"0px 0px"
		},
	},
	url: "http://emoji.fileformat.info/gemoji/sunglasses.png"
};

/*
config = {
	size : 24,
	url : "//cdn.ronghub.com/css-sprite_bg-2.1.10.png"
}
*/ 
var config = {
	// size : 26,
	// url : "http://emoji.fileformat.info/gemoji/sunglasses.png"
};

test(RongIMLib.RongIMEmoji);

function test(RongIMEmoji){
	RongIMEmoji.init(emojiNew,config);


	var list = document.querySelector('#supportList');
		list.innerHTML = RongIMEmoji.names.join(", ");

	var t = document.querySelector('#show');

	var str = "[ç‹ç¬‘] [éœ²é½¿è€Œç¬‘]  æµ‹è¯•Emoji";


	//symbolToEmoji
	t.innerHTML += "symbolToEmoji \n";

	str = RongIMEmoji.symbolToEmoji(str);
	t.innerHTML += "\t" + str + "\n\n";


	//emojiToSymbol
	t.innerHTML += "emojiToSymbol \n";

	str = RongIMEmoji.emojiToSymbol(str);
	t.innerHTML += "\t" + str + "\n\n";	



	//emojiToHTML
	var str = "æˆ‘æ”¶åˆ°äº†ä¸€ä¸ªè¡¨æƒ… \uf600 \uf601 å¾ˆé…·";
	t.innerHTML += "emojiToHTML \n";
	str = RongIMEmoji.emojiToHTML(str);
	t.innerHTML += "\t" + str + "\n\n";	



	//symbolToHTML
	t.innerHTML += "symbolToHTML \n";

	var str = "[ç‹ç¬‘] [éœ²é½¿è€Œç¬‘]  æµ‹è¯•Emoji";
	str = RongIMEmoji.symbolToHTML(str);
	t.innerHTML +=  "\t" + str + "\n";
}	
</script>

<!-- require load -->
<!-- <script src="lib/require.js"></script>
<script>
require.config({
    paths: {
    	RongIMEmoji: './lib/RongEmoji-dev'
    }
});

require(['RongIMEmoji'], function(RongIMEmoji) {
    test(RongIMEmoji);
});	
</script> -->


<h2>èäº‘æ¶ˆæ¯ message é‡Œçš„ emoji è¯´æ˜</h2>
<ol>
	<li>å‘æ¶ˆæ¯ ï¼Œç›´æ¥å‘é€ ğŸ˜€ åŸç”Ÿ emoji å­—ç¬¦</li>
	<li>Web SDK æ¥æ”¶æ¶ˆæ¯ä¼šè¢«è½¬ç æˆ â€œuf600â€ æ ¼å¼ï¼Œéœ€è¦å†è°ƒç”¨emojiToHTMLæ‰èƒ½æ­£ç¡®æ˜¾ç¤º</li>
</ol>

<style>
.chatbox{
	margin:3em;
	display: inline-block;
}	
.chatbox-message{
	border:1px solid #ccc;
	outline:none;
	width:900px;
	height:100px;
	padding:5px;
	font-size:12px;
}
.chatbox-tools-emoji{
	position:relative;
}
.chatbox-emoji-btn{
	font-size:12px;
}
.chatbox-emoji-panel{
	display:none;
	border:1px solid #ccc;
	padding:5px;
	background:#fff;
	position:absolute;
	bottom:1em;
	left:0;
}
</style>
<div class="chatbox">
	<h3>å‘é€è¡¨æƒ…demo</h3>
	<div class="chatbox-tools">
		<div class="chatbox-tools-emoji">
			<a href="#emoji" class="chatbox-emoji-btn" id="chatbox-emoji-btn">è¡¨æƒ…</a>
			<div class="chatbox-emoji-panel" id="chatbox-emoji-panel"></div>
		</div>
	</div>
	<textarea class="chatbox-message" id="chatbox-message">ä»Šå¤©å¿ƒæƒ…å¾ˆä¸é”™[å¤§ç¬‘]</textarea>
	<p>	<a href="#" id="chatbox-send">å‘é€</a></p>
</div>
<script>
(function(){
	var RongIMEmoji = RongIMLib.RongIMEmoji;
	RongIMEmoji.init();
	var chatbox = document.getElementById("chatbox-message");
	var btn = document.getElementById("chatbox-emoji-btn");
	var panel = document.getElementById("chatbox-emoji-panel");
	btn.onclick = function(){
		panel.style.display = "block";
		var emojis = RongIMEmoji.emojis;
		for(var i=0;i<emojis.length;i++){
			panel.appendChild(emojis[i]);
		}
		return false;
	}
	panel.onclick = function(event){
		var e = event || window.event;
		var target = e.target || e.srcElement;
		// console.log(target)
		// console.log(target.parentNode)
		chatbox.innerHTML += target.parentNode.getAttribute("name");
	}

	var send = document.getElementById("chatbox-send");
	send.onclick = function(){
		var message = chatbox.innerHTML;
		message = RongIMEmoji.symbolToEmoji(message);
		console.log(message);
		alert("è°ƒç”¨å‘é€æ¶ˆæ¯æ–¹æ³•å‘é€messageå³å¯");
		return false;
	}
})();	
</script>
</body>
</html>