<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Emoji</title>
</head>
<body>
<a href="https://github.com/rongcloud/websdk-demo/blob/master/emoji.html" class="get-source">è·å–æºç </a>
<style>
body{
    font-family:arial;
    font-size: 14px;
    color: #333;
    line-height: 1.42857143;
}
.chatbox {
    margin-bottom: 20px;
}
.get-source {
    text-decoration:none;
    background:#000;
    color:#fff;
    padding:10px 30px;
    border-radius:5px;
    position:fixed;
    right:5px;
    top:5px;
}
pre.code{
    padding:5px;
    border:1px solid #ccc;
    background:#f5f5f5;
    border-radius:3px;
    font-family:arial;
    line-height:2;
}
p {
    margin: 5px;
    margin-left: 0;
}
h1 {
    font-size: 36px;
}
h2 {
    font-size: 30px;
}
ol li {
    margin-bottom: 10px;
}
ol ol, ol ul, ul ol, ul ul {
    padding-left: 17px;
}
.support-list{
    background:#f5f5f5;
    line-height: 2;
    font-size: 12px;
}   
.doc-content {
    font-size: 13px;
    background:#f5f5f5;
    padding-bottom: 10px;
    padding-top: 10px;
}

a {
    cursor: pointer;
    color: #337ab7;
    text-decoration: none;
}
a:hover {
    text-decoration: underline;
}

pre {
    margin: 0;
    border: none;
    background-color: #f5f5f5;
    padding: 9.5px;
    font-size: 13px;
}
.table-bordered, td, tr, th {
    border: 1px solid #ddd;
}

.table>caption+thead>tr:first-child>td, .table>caption+thead>tr:first-child>th, .table>colgroup+thead>tr:first-child>td, .table>colgroup+thead>tr:first-child>th, .table>thead:first-child>tr:first-child>td, .table>thead:first-child>tr:first-child>th {
    border-top: none;
}
td, th {
    padding: 8px;
    vertical-align: top;
    border-top: 1px solid #ddd;
}
th {
    vertical-align: bottom;
}
#chatbox-send {
    margin-left: 1%;
}

.chatbox-emoji-btn {
    margin-left: 1%;
}

.chatbox-emoji-panel {
    margin-left: 1%;
    width: 50%;
}
.chatbox-message {
    margin-left: 1%;
    width: 50%;
    height: 150px;
    font-size: 14px;
}
.chatbox-show {
    float: right;
    width: 365px;
    height: 150px;
    border: 1px solid black;
    overflow: auto;
    margin-right: 2%;
}
.chatbox-btn {
    margin-left: 1%;
    padding: 2px 5px;
}

</style>
    
<script src="https://cdn.ronghub.com/RongEmoji-2.2.6.js"></script> 

<h1>Emoji</h1>

<h2>èäº‘æ¶ˆæ¯ message é‡Œçš„ emoji è¯´æ˜</h2>
<ol>
    <li>
        <p>å‘æ¶ˆæ¯æ—¶, å¿…é¡»ç›´æ¥å‘é€emojiåŸç”Ÿå­—ç¬¦. å¦‚ï¼šğŸ˜€ , è½¬æ¢æ–¹æ³•ï¼šsymbolToEmoji</p>
    </li>
    <li>
        <p>Web SDKæ¥æ”¶æ¶ˆæ¯æ—¶æ¥æ”¶åˆ°çš„æ˜¯unicodeç¼–ç æ ¼å¼, å¦‚ï¼šâ€ef600â€.éœ€è¦è½¬åŒ–æ‰èƒ½æ­£ç¡®æ˜¾ç¤ºåŸç”Ÿemoji</p>
    </li>
</ol>

<h2>Emoji è¯´æ˜</h2>
<ol>
    <li>
        <p>emoji æ’ä»¶å†…ç½®äº†128ä¸ªemojiè¡¨æƒ…çš„å›¾ç‰‡, <strong>ä¸»è¦æ˜¯ä¸ºäº†åšæ¶ˆæ¯è¾“å…¥æ¡†çš„è¡¨æƒ…é€‰é¡¹, </strong>ä¹Ÿå¯è‡ªè¡Œæ‰©å±•é…ç½®.</p>
    </li>
    <li>
        <p>
            æ”¯æŒèŒƒå›´: 
            <p>(1), IE7+ã€Edgeã€Chrome 30+ã€Firefox 30+ã€Safari 10+ ç­‰ä¸»æµæ¡Œé¢ç‰ˆæµè§ˆå™¨</p>
            <p>(2), Android 4.4+ç³»ç»Ÿçš„Chromeæµè§ˆå™¨ä»¥åŠå¾®ä¿¡æµè§ˆå™¨</p>
            <p>(3), iPhone æ“ä½œç³»ç»ŸiOS 8.0+ çš„Safariæµè§ˆå™¨ä»¥åŠå¾®ä¿¡æµè§ˆå™¨</p>
        </p>
    </li>
    <li>
        <p><a onclick="setupExpand('initCode')">Emoji åˆå§‹åŒ–è®¾ç½®</a></p>
        <pre id="initCode" style="display: none">
    // ç›´æ¥åˆå§‹åŒ–
    RongIMLib.RongIMEmoji.init();

    // é€šè¿‡é…ç½®åˆå§‹åŒ–
    // è¡¨æƒ…ä¿¡æ¯å¯å‚è€ƒ <a href="http://unicode.org/emoji/charts/full-emoji-list.html">http://unicode.org/emoji/charts/full-emoji-list.html</a>
    var config = {
        size: 24, // å¤§å°, é»˜è®¤ 24, å»ºè®®15 - 55
        url: '//f2e.cn.ronghub.com/sdk/emoji-48.png', // æ‰€æœ‰ emoji çš„èƒŒæ™¯å›¾ç‰‡
        lang: 'zh', // é€‰æ‹©çš„è¯­è¨€, é»˜è®¤ zh
        // æ‰©å±•è¡¨æƒ…
        extension: {
            dataSource: {
                "u1F914":{  
                    "en":"thinking face", // è‹±æ–‡åç§°
                    "zh":"æ€è€ƒ", // ä¸­æ–‡åç§°
                    "tag":"ğŸ¤”", // åŸç”Ÿemoji
                    "position":"0px 0px" // æ‰€åœ¨èƒŒæ™¯å›¾ä½ç½®åæ ‡
                },
                .....
                .....
            },
            // æ–°å¢ emoji çš„èƒŒæ™¯å›¾ url
            url: 'https://emojipedia-us.s3.amazonaws.com/thumbs/160/apple/96/thinking-face_1f914.png'
        }
    };
    RongIMLib.RongIMEmoji.init(config);

        </pre>
    </li>

    <li>
        <p><a onclick="setupExpand('sdkFuc')">Emoji API</a></p>
        <table id="sdkFuc" class="table table-bordered" style="display: none; width: 97%">
            <thead>
                <tr>
                    <th>æ–¹æ³•</th>
                    <th>ä½¿ç”¨ç¤ºä¾‹</th>
                    <th>æ–¹æ³•è¯´æ˜</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>list</td>
                    <td>
<!-- start -->                        
                        <pre>
var list = RongIMEmoji.list;</pre>
<!-- end -->
                    </td>
                    <td>è·å–æ‰€æœ‰æ•°æ®ï¼Œæ–¹ä¾¿äºŒæ¬¡å¼€å‘<br>
                        [{unicode: "u1F600", emoji: "ğŸ˜€", symbol:"[ç¬‘å˜»å˜»]", shadowDom: span }, { }, â€¦â€¦â€¦]
                    </td>
                </tr>
                <tr>
                    <td>emojiToSymbol(emoji, reg, func)</td>
                    <td>
<!-- start -->
                        <pre>
var symbol = RongIMEmoji.emojiToSymbol('æˆ‘æ˜¯ä¸€ä¸ªè¡¨æƒ…ğŸ˜');
<strong>è¿”å›å€¼: æˆ‘æ˜¯ä¸€ä¸ªè¡¨æƒ…[éœ²é½¿è€Œç¬‘]</strong></pre>
<!-- end -->
                    </td>
                    <td>å°†åŸç”Ÿemojiè½¬åŒ–ä¸ºå¯¹åº”æ–‡å­—</td>
                </tr>
                <tr>
                    <td>symbolToEmoji(symbol, func)</td>
                    <td>
<!-- start -->
                        <pre>
var emoji = RongIMEmoji.symbolToEmoji('æˆ‘æ˜¯ä¸€ä¸ªè¡¨æƒ…[éœ²é½¿è€Œç¬‘]');
<strong>è¿”å›å€¼: æˆ‘æ˜¯ä¸€ä¸ªè¡¨æƒ…ğŸ˜</strong>
var emoji = RongIMEmoji.symbolToEmoji('æˆ‘æ˜¯ä¸€ä¸ªè¡¨æƒ…[éœ²é½¿è€Œç¬‘]', function(emoji) { 
    return '[emoji]'; 
}); 
<strong>è¿”å›å€¼: æˆ‘æ˜¯ä¸€ä¸ªè¡¨æƒ…[emoji]</strong></pre>
<!-- end -->
                    </td>
                    <td>å°†emojiçš„å¯¹åº”åç§°è½¬åŒ–ä¸ºåŸç”Ÿemojiå­—ç¬¦</td>
                </tr>
                <tr>
                    <td>emojiToHTML(emoji, size, reg, func)</td>
                    <td>
<!-- start -->
                        <pre>
var html = RongIMEmoji.emojiToHTML('æˆ‘æ˜¯ä¸€ä¸ªè¡¨æƒ…ğŸ˜');</pre>
<!-- end -->
                    </td>
                    <td>å°†åŸç”Ÿemojiè½¬åŒ–ä¸ºspanæ ‡ç­¾, é»˜è®¤æ ‡ç­¾å¤§å°ä¸º24px</td>
                </tr>
                <tr>
                    <td>symbolToHTML(symbol, size, reg, func)</td>
                    <td>
<!-- start -->
                        <pre>
var html = RongIMEmoji.symbolToHTML('æˆ‘æ˜¯ä¸€ä¸ªè¡¨æƒ…[éœ²é½¿è€Œç¬‘]')</pre>
<!-- end -->
                    </td>
                    <td>å°†åŸç”Ÿemojiè½¬åŒ–ä¸ºspanæ ‡ç­¾</td>
                </tr>
                <tr>
                    <td>isSupportEmoji</td>
                    <td>
<!-- start -->
                        <pre>
var isSupportEmoji = RongIMEmoji.isSupportEmoji;</pre>
<!-- end -->                            
                    </td>
                    <td>åˆ¤æ–­æ˜¯å¦æ”¯æŒemojiçš„æ¸²æŸ“</td>
                </tr>
            </tbody>
        </table>
    </li>
</ol>



<script>
function setupExpand(expandId) {
    var expandDom = document.getElementById(expandId);
    var display = expandDom.style.display;
    display = display === "none" ? "block" : "none";
    expandDom.style.display = display;
}
</script>

<div class="chatbox">
    <h2>å‘é€è¡¨æƒ…æç®€demo</h3>
    <div class="chatbox-tools">
        <div class="chatbox-tools-emoji">
            <a href="#emoji" class="chatbox-emoji-btn" id="chatbox-emoji-btn">è¡¨æƒ…</a>
            <div class="chatbox-emoji-panel" id="chatbox-emoji-panel"></div>
        </div>
    </div>
    <ol class="chatbox-show" id="chatbox-show"></ol>
    <textarea class="chatbox-message" id="chatbox-message">ä»Šå¤©å¿ƒæƒ…å¾ˆä¸é”™[ç¬‘å˜»å˜»]</textarea>
    <p> 
        <a class="chatbox-btn" id="symbol-emoji">SymbolToEmoji</a>
        <a class="chatbox-btn" id="emoji-symbol" onclick="emojiToSymbol">EmojiToSymbol</a> 
        <a class="chatbox-btn" id="emoji-html" onclick="emojiToHtml">EmojiToHtml</a> 
        <a class="chatbox-btn" id="symbol-html" onclick="symbolToHtml">SymbolToHtml</a> 
    </p>
    <p>
        <a class="chatbox-btn" id="symbol-emoji-invalid">SymbolToEmoji( ä¸æ”¯æŒemojiæ—¶, åŸç”Ÿemojiå­—ç¬¦æ˜¾ç¤ºä¸º [emoji] )</a>
    </p>
</div>


<script>
/*
å‘é€è¡¨æƒ…æç®€Demo
 */
(function(){
    var chatbox = document.getElementById("chatbox-message");
    var btn = document.getElementById("chatbox-emoji-btn");
    var panel = document.getElementById("chatbox-emoji-panel");
    var chatshow = document.getElementById("chatbox-show");

    var RongIMEmoji = RongIMLib.RongIMEmoji;

    var config = {
        size: 24,
        // url: '//f2e.cn.ronghub.com/sdk/emoji-48.png?replace', // ä¼ å…¥æœåŠ¡å™¨è·¯å¾„
        // url: 'res/emojis.png?replace', // ä¼ å…¥æœ¬åœ°è·¯å¾„
        lang: 'zh',
        extension: {
            dataSource: {
                u1F914: {
                    zh: 'æ€è€ƒ',
                    en: 'thinking face',
                    tag: 'ğŸ¤”',
                    position: '0px 0px'
                }
            },
            url: 'https://emojipedia-us.s3.amazonaws.com/thumbs/160/apple/96/thinking-face_1f914.png'
        }
    };

    RongIMEmoji.init(config);
    appendChild('init: åˆå§‹åŒ–RongIMEmoji');
    
    btn.onclick = function(){
        panel.style.display = "block";
        var emojis = getEmojiDetailList();
        bindClickEmoji(emojis);
        return false;
    };

    var symbolToEmojiBtn = document.getElementById("symbol-emoji");
    symbolToEmojiBtn.onclick = function(){
        var message = chatbox.value;
        message = RongIMEmoji.symbolToEmoji(message);
        appendChild('symbolToEmoji: ' + message);
        return false;
    };

    var emojiToSymbol = document.getElementById("emoji-symbol");
    emojiToSymbol.onclick = function(){
        var message = chatbox.value;
        message = RongIMEmoji.emojiToSymbol(message);
        appendChild('emojiToSymbol: ' + message);
        return false;
    };


    var emojiToHtmlBtn = document.getElementById("emoji-html");
    emojiToHtmlBtn.onclick = function(){
        var message = chatbox.value;
        message = RongIMEmoji.emojiToHTML(message, 33);
        appendChild('emojiToHtml: ' + message);
        return false;
    };

    var symbolToHtmlBtn = document.getElementById("symbol-html");
    symbolToHtmlBtn.onclick = function(){
        var message = chatbox.value;
        message = RongIMEmoji.symbolToHTML(message);
        appendChild('symbolToHtml: ' + message);
        return false;
    };

    var symbolToEmojiInvalid = document.getElementById("symbol-emoji-invalid");
    symbolToEmojiInvalid.onclick = function() {
        var message = chatbox.value;
        var isSupportEmoji = RongIMEmoji.isSupportEmoji;
        message = RongIMEmoji.symbolToEmoji(message, function(emoji) {
            return isSupportEmoji ? emoji : '<span style="color: rgb(182, 182, 182)">[emoji]</span>';
        });
        appendChild('symbolToEmoji: ' + message);
        return false;
    };


    function appendChild(text) {
        var div = document.createElement('div');
        div.innerHTML = '<li>' + text + '</li>';
        var child = div.childNodes[0];
        chatshow.appendChild(child);
    }

    function getEmojiDetailList() {
        var shadowDomList = [];
        for (var i = 0; i < RongIMEmoji.list.length; i++) {
            var value = RongIMEmoji.list[i];
            shadowDomList.push(value.node);
        }
        return shadowDomList;
    }

    function bindClickEmoji(emojis) {
        for(var i=0;i<emojis.length;i++){
            var emojiHtml = emojis[i];
            panel.appendChild(emojiHtml);
            emojiHtml.onclick = clickEmoji;
        }
    }

    function clickEmoji(event) {
        var e = event || window.event;
        var target = e.target || e.srcElement;
        if (document.all && !document.addEventListener === false) {
            console.log(target);
        }
        chatbox.value = chatbox.value + target.getAttribute("name");
    }


})();
</script>

</body>
</html>