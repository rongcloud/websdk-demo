<!DOCTYPE html>
<html lang="en">
<head>
<link rel="stylesheet" href="https://cdn.bootcss.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<meta charset="UTF-8">
<title>Emoji</title>
</head>
<body>
<a href="https://github.com/rongcloud/websdk-demo/blob/master/emoji.html" class="get-source">è·å–æºç </a>

<style>
body{
    font-family:arial;
}
.get-source {
    text-decoration:none;
    background:#000;
    color:#fff;
    padding:10px 30px;
    border-radius:5px;
    position:fixed;
    right:5px;
    top:5px;
}
pre.code{
    padding:5px;
    border:1px solid #ccc;
    background:#f5f5f5;
    border-radius:3px;
    font-family:arial;
    line-height:2;
}
p {
    margin: 5px;
    margin-left: 0;
}
ol li {
    margin-bottom: 10px;
}
ol ol, ol ul, ul ol, ul ul {
    padding-left: 17px;
}
.support-list{
    background:#f5f5f5;
    line-height: 2;
    font-size: 12px;
}   
.doc-content {
    font-size: 13px;
    background:#f5f5f5;
    padding-bottom: 10px;
    padding-top: 10px;
}

a {
    cursor: pointer;
}

#chatbox-send {
    margin-left: 1%;
}

.chatbox-emoji-btn {
    margin-left: 1%;
}

.chatbox-emoji-panel {
    margin-left: 1%;
    width: 50%;
}

.chatbox-message {
    margin-left: 1%;
    width: 50%;
    height: 150px;
}

</style>
    
<script src="lib/RongEmoji-dev.js"></script> 

<h1>Emoji</h1>
<h2>åŸºç¡€APIæ–¹æ³•</h2>
<ol>
    <li>
        <p>emoji SDK å†…ç½®äº†128ä¸ªemojiè¡¨æƒ…çš„å›¾ç‰‡ï¼Œä¹Ÿå¯è‡ªè¡Œæ‰©å±•é…ç½®ã€‚</p>
    </li>
    <li>
        <p><a onclick="setupExpand('initCode')">emoji SDK åˆå§‹åŒ–</a></p>
        <pre id="initCode" style="display: none">
    <strong>/* 1ï¼Œä½¿ç”¨é»˜è®¤é…ç½®, ç›´æ¥åˆå§‹åŒ– */</strong>
    RongIMLib.RongIMEmoji.init();

    <strong>/* 2ï¼Œä¸ä½¿ç”¨é»˜è®¤é…ç½®ï¼Œè‡ªå®šä¹‰åˆå§‹åŒ– */</strong>
   
    // è¡¨æƒ…ä¿¡æ¯å¯å‚è€ƒ <a href="http://unicode.org/emoji/charts/full-emoji-list.html">http://unicode.org/emoji/charts/full-emoji-list.html</a>
    
    // <strong>æ‰©å±•è¡¨æƒ…ï¼Œè®¾ç½®æ‰©å±•è¡¨æƒ…çš„ä¿¡æ¯</strong>
    var emoji = {
        dataSource: {
            "è¡¨æƒ…unicodeç ":{
                "en":"è‹±æ–‡åç§°",
                "zh":"ä¸­æ–‡åç§°",
                "tag":"åŸç”Ÿè¡¨æƒ…å­—ç¬¦",
                "position":"å¤šèƒŒæ™¯å›¾æ—¶è¡¨æƒ…å¯¹åº”çš„åæ ‡"
            },
        },
        url: "èƒŒæ™¯å›¾ç‰‡åœ°å€"
    };
    // <strong>è‡ªå®šä¹‰è®¾ç½®</strong>
    var config = {
        size: 'å¤§å°',
        url: 'èƒŒæ™¯å›¾',
        lang: 'é€‰æ‹©çš„è¯­è¨€',
        reg: 'åŒ¹é…unicodeçš„æ­£åˆ™è¡¨è¾¾å¼'
    };
    // <strong>åˆå§‹åŒ–</strong>
    RongIMLib.RongIMEmoji.init(emoji, config);
        </pre>
    </li>
    <li>
        <p><a onclick="setupExpand('sdkFuc')">SDKåŸºæœ¬ä½¿ç”¨æ–¹æ³•</a></p>
        <table id="sdkFuc" class="table table-bordered" style="display: none; width: 97%">
            <thead>
                <tr>
                    <th>æ–¹æ³•</th>
                    <th>å‚æ•°</th>
                    <th>ç±»å‹</th>
                    <th>å‚æ•°è¯´æ˜</th>
                    <th>æ–¹æ³•è¯´æ˜</th>
                    <th>ä½¿ç”¨ç¤ºä¾‹</th>
                    <th>åº”ç”¨åœºæ™¯</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>isSupportEmoji</td>
                    <td>æ— </td>
                    <td>æ— </td>
                    <td>æ— </td>
                    <td>åˆ¤æ–­æ˜¯å¦æ”¯æŒemojiçš„æ¸²æŸ“</td>
                    <td>var isSupportEmoji = RongIMLib.RongIMEmoji.isSupportEmoji;</td>
                    <td></td>
                </tr>
                <tr>
                    <td>emojis</td>
                    <td>æ— </td>
                    <td>æ— </td>
                    <td>æ— </td>
                    <td>è·å–å…¨éƒ¨è¡¨æƒ…çš„htmlæ ‡ç­¾</td>
                    <td>var emojis = RongIMLib.RongIMEmoji.emojis;</td>
                    <td></td>
                </tr>
                 <tr>
                    <td>names</td>
                    <td>æ— </td>
                    <td>æ— </td>
                    <td>æ— </td>
                    <td>è·å–å…¨éƒ¨è¡¨æƒ…çš„å¯¹åº”æ–‡å­—è¯´æ˜, åå­—çš„è¯­è¨€ä¸ºconfigä¸­è®¾ç½®çš„è¯­è¨€ï¼Œé»˜è®¤ä¸­æ–‡</td>
                    <td>var names = RongIMLib.RongIMEmoji.names;</td>
                    <td></td>
                </tr>
                <tr>
                    <td>emojiToSymbol(emoji, reg)</td>
                    <td>
                        <ol>
                            <li>emoji</li>
                            <li>reg</li>
                        </ol>
                    </td>
                    <td>
                        <ol>
                            <li>String</li>
                            <li>regExp</li>
                        </ol>
                    </td>
                    <td>
                        <ol>
                            <li>å¿…å¡«ï¼ŒåŒ…å«åŸç”Ÿemojiçš„å­—ç¬¦ä¸²ã€‚</li>
                            <li>å¯é€‰ï¼Œè®¾ç½®åŒ¹é…unicodeçš„æ­£åˆ™è¡¨è¾¾å¼ï¼Œé»˜è®¤å€¼ä¸º/[\uf000-\uf700]/gã€‚</li>
                        </ol>
                    </td>
                    <td>è·å–å…¨éƒ¨è¡¨æƒ…çš„å¯¹åº”æ–‡å­—è¯´æ˜, åå­—çš„è¯­è¨€ä¸ºconfigä¸­è®¾ç½®çš„è¯­è¨€ï¼Œé»˜è®¤ä¸­æ–‡</td>
                    <td>var symbol = emojiToSymbol('æˆ‘æ˜¯ä¸€ä¸ªè¡¨æƒ…ğŸ˜ã€‚'); <br> è¿”å›å€¼ï¼šæˆ‘æ˜¯ä¸€ä¸ªè¡¨æƒ…[éœ²é½¿è€Œç¬‘]</td>
                    <td>åœ¨ä¸æ”¯æŒåŸç”Ÿemojiæ¸²æŸ“æ—¶ï¼Œå¯ä»¥æ˜¾ç¤ºå¯¹åº”åç§°ã€‚é€‚ç”¨äºæ¶ˆæ¯è¾“å…¥ï¼Œä¼šè¯åˆ—è¡¨çš„emojiæ˜¾ç¤ºã€‚</td>
                </tr>
                <tr>
                    <td>symbolToEmoji(symbol)</td>
                    <td>
                        <ol>
                            <li>symbol</li>
                        </ol>
                    </td>
                    <td>
                        <ol>
                            <li>String</li>
                        </ol>
                    </td>
                    <td>
                        <ol>
                            <li>å¿…å¡«ï¼ŒåŒ…å«emojiå¯¹åº”åç§°çš„å­—ç¬¦ä¸²ï¼Œå¦‚ï¼šæˆ‘æ˜¯ä¸€ä¸ªè¡¨æƒ…[éœ²é½¿è€Œç¬‘]ã€‚</li>
                        </ol>
                    </td>
                    <td>å°†emojiçš„å¯¹åº”åç§°è½¬åŒ–ä¸ºåŸç”Ÿemojiå­—ç¬¦ã€‚</td>
                    <td>var emoji = symbolToEmoji('æˆ‘æ˜¯ä¸€ä¸ªè¡¨æƒ…[éœ²é½¿è€Œç¬‘]ã€‚');<br> æˆ‘æ˜¯ä¸€ä¸ªè¡¨æƒ…ğŸ˜ã€‚</td>
                    <td>å‘é€æ¶ˆæ¯æ—¶ï¼Œæ¶ˆæ¯ä½“é‡Œå¿…é¡»ä½¿ç”¨åŸç”Ÿemojiå­—ç¬¦ï¼Œéœ€è¦ä½¿ç”¨è¯¥æ–¹æ³•è¿›è¡Œè½¬æ¢ã€‚</td>
                </tr>
                <tr>
                    <td>emojiToHTML(emoji, size, reg)</td>
                    <td>
                        <ol>
                            <li>emoji</li>
                            <li>size</li>
                            <li>reg</li>
                        </ol>
                    </td>
                    <td>
                        <ol>
                            <li>String</li>
                            <li>Number</li>
                            <li>reg</li>
                        </ol>
                    </td>
                    <td>
                        <ol>
                            <li>å¿…å¡«ï¼ŒåŒ…å«åŸç”Ÿemojiçš„å­—ç¬¦ä¸²ã€‚</li>
                            <li>å¯é€‰ï¼Œè®¾ç½®è¿”å›æ ‡ç­¾çš„å¤§å°</li>
                            <li>å¯é€‰ï¼ŒåŒ…å«åŸç”Ÿemojiçš„å­—ç¬¦ä¸²ã€‚</li>
                        </ol>
                    </td>
                    <td>å°†åŸç”Ÿemojiè½¬åŒ–ä¸ºHTMLæ ‡ç­¾ï¼Œä½¿ç”¨èƒŒæ™¯å›¾ç‰‡æ¥æ˜¾ç¤ºemojiå­—ç¬¦ï¼Œå¯é€‰æ˜¯å¦é‡æ–°è®¾ç½®æ ‡ç­¾å¤§å°ï¼Œé»˜è®¤ä¸º24px</td>
                    <td>var html = emojiToHTML('æˆ‘æ˜¯ä¸€ä¸ªè¡¨æƒ…ğŸ˜ã€‚');</td>
                    <td>éœ€è¦åœ¨æŸäº›ä¸æ”¯æŒemojiå­—ç¬¦æ¸²æŸ“çš„æ“ä½œç³»ç»Ÿä¸­å±•ç¤ºemojiæ—¶ï¼Œæˆ–è€…éœ€è¦åœ¨æ‰€æœ‰æ“ä½œç³»ç»Ÿä¸­å±•ç¤ºç›¸åŒçš„emojiå­—ç¬¦æ—¶ï¼Œå¯ä»¥ä½¿ç”¨è¯¥æ–¹æ³•å±•ç¤ºemojiã€‚</td>
                </tr>
                <tr>
                    <td>symbolToHTML(symbol, size, reg)</td>
                    <td>
                        <ol>
                            <li>symbol</li>
                            <li>size</li>
                            <li>reg</li>
                        </ol>
                    </td>
                    <td>
                        <ol>
                            <li>String</li>
                            <li>Number</li>
                            <li>reg</li>
                        </ol>
                    </td>
                    <td>
                        <ol>
                            <li>å¿…å¡«ï¼ŒåŒ…å« emojiå¯¹åº”åç§° çš„å­—ç¬¦ä¸²</li>
                            <li>å¯é€‰ï¼Œè®¾ç½®è¿”å›æ ‡ç­¾çš„å¤§å°</li>
                            <li>å¯é€‰ï¼ŒåŒ…å«åŸç”Ÿemojiçš„å­—ç¬¦ä¸²ã€‚</li>
                        </ol>
                    </td>
                    <td>å°†åŸç”Ÿemojiè½¬åŒ–ä¸ºHTMLæ ‡ç­¾ï¼Œä½¿ç”¨èƒŒæ™¯å›¾ç‰‡æ¥æ˜¾ç¤ºemojiå­—ç¬¦ï¼Œå¯é€‰æ˜¯å¦é‡æ–°è®¾ç½®æ ‡ç­¾å¤§å°ï¼Œé»˜è®¤ä¸º24px</td>
                    <td>var html = symbolToHTML('æˆ‘æ˜¯ä¸€ä¸ªè¡¨æƒ…[éœ²é½¿è€Œç¬‘]ã€‚')</td>
                    <td></td>
                </tr>
                <tr>
                    <td>messageDecode(emoji, reg)</td>
                    <td>
                        <ol>
                            <li>emoji</li>
                            <li>reg</li>
                        </ol>
                    </td>
                    <td>
                        <ol>
                            <li>String</li>
                            <li>reg</li>
                        </ol>
                    </td>
                    <td>
                        <ol>
                            <li>å¿…å¡«ï¼ŒåŒ…å« emojiçš„unicodeç  çš„å­—ç¬¦ä¸²</li>
                            <li>å¯é€‰ï¼Œè®¾ç½®åŒ¹é…unicodeçš„æ­£åˆ™è¡¨è¾¾å¼</li>
                        </ol>
                    </td>
                    <td>å°†emojiçš„unicodeç è½¬åŒ–ä¸ºå¯¹åº”çš„åŸç”Ÿemojiå­—ç¬¦ã€‚</td>
                    <td>var message = messageDecode('æ”¶åˆ°ä¸€æ¡æ¶ˆæ¯ \uf601'); <br>è¿”å›å€¼ï¼š æ”¶åˆ°ä¸€æ¡æ¶ˆæ¯ ğŸ˜</td>
                    <td>Web SDK æ¥æ”¶æ¶ˆæ¯åï¼Œæ¶ˆæ¯ä½“å†…çš„åŸç”Ÿ Emoji å­—ç¬¦ä¼šè¢«è§£ç ä¸ºå¯¹åº”çš„ unicode ç ï¼Œå¦‚ï¼š\uf600ã€‚éœ€ä½¿ç”¨è¯¥æ–¹æ³•è½¬åŒ–æ‰èƒ½æ­£ç¡®æ˜¾ç¤ºã€‚</td>
                </tr>
            </tbody>
        </table>
    </li>
    <li>
        <p><a onclick="setupExpand('show')">SDKä½¿ç”¨ç¤ºä¾‹</a></p>
        <pre class="code" id="show" style="display: none"></pre>
    </li>
</ol>


<h2>èäº‘æ¶ˆæ¯ message é‡Œçš„ emoji è¯´æ˜</h2>
<ol>
    <li>
        <p>å‘æ¶ˆæ¯æ—¶ï¼Œå¿…é¡»ç›´æ¥å‘é€emojiåŸç”Ÿå­—ç¬¦ã€‚å¦‚ï¼šğŸ˜€ ã€‚è½¬æ¢æ–¹æ³•ï¼šsymbolToEmoji(symbolStr)ã€‚</p>
    </li>
    <li>
        <p>Web SDKæ¥æ”¶æ¶ˆæ¯æ—¶æ¥æ”¶åˆ°çš„æ˜¯unicodeç¼–ç æ ¼å¼ï¼Œå¦‚ï¼šâ€ef600â€ã€‚éœ€è¦ä½¿ç”¨messageDecodeæ–¹æ³•è½¬åŒ–æˆåŸç”Ÿemojiã€‚</p>
    </li>
</ol>







<script>
//åˆå§‹åŒ–
/*
http://www.fileformat.info/info/unicode/char/1f60e/index.htm
*/ 

// é€šè¿‡è‡ªå®šä¹‰æ‰©å±•ï¼Œè§£å†³å¯¹â€œç‹ç¬‘â€çš„æ”¯æŒ 
var emojiNew = {
    dataSource: {
        "u1F60E":{
            "en":"smiling face with sunglasses",
            "zh":"ç‹ç¬‘",
            "tag":"ğŸ˜",
            "position":"0px 0px"
        },
        /* æ–°å¢æ€ªç‰©è¡¨æƒ…, u1F701è¶…å‡ºäº†é»˜è®¤çš„regExpï¼Œéœ€è¦åœ¨configä¸­è®¾ç½®å…¨å±€regExpï¼Œæˆ–è€…è½¬åŒ–æ—¶ä¼ å…¥ç¬¬äºŒä¸ªåŒ¹é…å‚æ•° */
        "u1F701": {
            "en": "ogre",
            "zh": "æ€ªç‰©",
            "tag": "ğŸ‘¹",
            "position": "0px 0px"
        }
    },
    url: "http://emoji.fileformat.info/gemoji/sunglasses.png"
};

// ä¸­æ–‡é…ç½®
var config = {
    size : 24,
    lang: 'zh',
    url : "./emojis.png"
};

var enConfig = {
    size: 27,
    lang: 'en'
};

test(RongIMLib.RongIMEmoji);

function test(RongIMEmoji){


    RongIMEmoji.init(emojiNew, enConfig);

    var t = document.querySelector('#show');
    var str;


    //isSupportEmoji
    t.innerHTML += "(0)isSupportEmojiï¼Œæ˜¯å¦æ”¯æŒemojiæ¸²æŸ“ï¼Ÿ \n";
    str = RongIMEmoji.isSupportEmoji;
    t.innerHTML += "è¿”å›å€¼ï¼š\n";
    t.innerHTML += "\t" + str + "\n\n";


    str = "[grinning_with_smiling] [grinning_face]  æµ‹è¯•Emoji";

    //symbolToEmoji
    t.innerHTML += "(1)symbolToEmojiï¼Œè‹±æ–‡å‚æ•°ï¼š \n";
    t.innerHTML += "å‰ç½®éœ€æ±‚ï¼š\n";
    t.innerHTML += "\téœ€è¦åœ¨RongIMEmoji.initæ—¶ä¼ å…¥configå‚æ•°ï¼Œå¹¶ä¸”configè®¾ç½®lang: en\n";
    t.innerHTML += "å‚æ•°ï¼š\n";
    t.innerHTML += "\t" + str + "\n";
    str = RongIMEmoji.symbolToEmoji(str);
    t.innerHTML += "è¿”å›å€¼ï¼š\n";
    t.innerHTML += "\t" + str + "\n\n\n";


    //symbolToEmoji english
    RongIMEmoji.init(emojiNew, config);
    str = "[ç‹ç¬‘] [éœ²é½¿è€Œç¬‘]  æµ‹è¯•Emoji";
    t.innerHTML += "(2)symbolToEmojiï¼Œä¸­æ–‡å‚æ•°ï¼š \n";
    t.innerHTML += "å‚æ•°ï¼š\n";
    t.innerHTML += "\t" + str + "\n";
    str = RongIMEmoji.symbolToEmoji(str);
    t.innerHTML += "è¿”å›å€¼ï¼š\n";
    t.innerHTML += "\t" + str + "\n\n\n"; 


    //emojiToSymbol
    t.innerHTML += "(3)emojiToSymbol \n";
    t.innerHTML += "å‚æ•°ï¼š\n";
    t.innerHTML += "\t" + str + "\n";
    str = RongIMEmoji.emojiToSymbol(str);
    t.innerHTML += "è¿”å›å€¼ï¼š\n";
    t.innerHTML += "\t" + str + "\n\n\n";  



    //emojiToHTML 
    var str = "æˆ‘æ”¶åˆ°äº†ä¸€ä¸ªè¡¨æƒ… ğŸ˜€ ğŸ˜ å¾ˆé…·";
    t.innerHTML += "(4)emojiToHTML \n";
    t.innerHTML += "å‚æ•°ï¼š\n";
    t.innerHTML +=  "\t1ï¼Œ" + str + "ã€‚\n";
    t.innerHTML +=  "\t2ï¼Œ35\n";
    str = RongIMEmoji.emojiToHTML(str, 35);
    t.innerHTML += "è¿”å›å€¼ï¼š\n";
    t.innerHTML += "\t" + str + "\n\n\n";  



    // //symbolToHTML
    t.innerHTML += "(5)symbolToHTML \n";
    var str = "[ç‹ç¬‘] [éœ²é½¿è€Œç¬‘]  æµ‹è¯•Emoji";
    t.innerHTML += "å‚æ•°ï¼š\n";
    t.innerHTML += "\t" + str + "\n";
    str = RongIMEmoji.symbolToHTML(str);
    t.innerHTML += "è¿”å›å€¼ï¼š\n";
    t.innerHTML +=  "\t" + str + "\n\n\n";


    // messageDecode
    t.innerHTML += "(6)messageDecode \n";
    var str = "æˆ‘æ”¶åˆ°äº†ä¸¤ä¸ªunicodeç å½¢å¼çš„è¡¨æƒ…ï¼Œåˆ†åˆ«æ˜¯ï¼š\uf600 \uf601(\\uf600 \\uf601)ã€‚";
    t.innerHTML += "å‚æ•°ï¼š\n";
    t.innerHTML += "\t" + str + "\n";
    str = RongIMEmoji.messageDecode(str);
    t.innerHTML += "è¿”å›å€¼ï¼š\n";
    t.innerHTML +=  "\t" + str + "\n\n\n";


    // è‡ªå®šä¹‰çš„æ‰©å±•
    str = "æµ‹è¯•æ‰©å±•çš„è‡ªå®šä¹‰è¡¨æƒ…, unicodeç ï¼š\uf701 (\\uf701)";
    t.innerHTML += "(7)messageDecode è·å–è‡ªå®šä¹‰çš„æ‰©å±•è¡¨æƒ… \n";
    t.innerHTML += "å‚æ•°ï¼š\n";
    t.innerHTML +=  "\t1ï¼Œ" + str + "ã€‚\n";
    t.innerHTML +=  "\t2ï¼Œ" + /[\uf000-\uf701]/g + "\n";
    str = RongIMEmoji.messageDecode(str, /[\uf000-\uf701]/g);
    t.innerHTML += "è¿”å›å€¼ï¼š\n";
    t.innerHTML += "\t" + str + "\n\n\n";
}   


function setupExpand(expandId) {
    var expandDom = document.getElementById(expandId);
    var display = expandDom.style.display;
    display = display == "none" ? null : "none";
    expandDom.style.display = display;
}

</script>







<div class="chatbox">
    <h2>å‘é€è¡¨æƒ…æç®€demo</h3>
    <div class="chatbox-tools">
        <div class="chatbox-tools-emoji">
            <a href="#emoji" class="chatbox-emoji-btn" id="chatbox-emoji-btn">è¡¨æƒ…</a>
            <div class="chatbox-emoji-panel" id="chatbox-emoji-panel"></div>
        </div>
    </div>
    <textarea class="chatbox-message" id="chatbox-message">ä»Šå¤©å¿ƒæƒ…å¾ˆä¸é”™[å¤§ç¬‘]</textarea>
    <p> <a href="#" id="chatbox-send">å‘é€</a></p>
</div>
<script>
(function(){
    var RongIMEmoji = RongIMLib.RongIMEmoji;
    RongIMEmoji.init();
    var chatbox = document.getElementById("chatbox-message");
    var btn = document.getElementById("chatbox-emoji-btn");
    var panel = document.getElementById("chatbox-emoji-panel");
    btn.onclick = function(){
        panel.style.display = "block";
        var emojis = RongIMEmoji.emojis;
        for(var i=0;i<emojis.length;i++){
            panel.appendChild(emojis[i]);
        }
        return false;
    }
    panel.onclick = function(event){
        var e = event || window.event;
        var target = e.target || e.srcElement;
        console.log(target);
        chatbox.value = chatbox.value + target.getAttribute("name");
    }
    var send = document.getElementById("chatbox-send");
    send.onclick = function(){
        var message = chatbox.value;
        message = RongIMEmoji.symbolToEmoji(message);
        console.log(message);
        alert("è°ƒç”¨å‘é€æ¶ˆæ¯æ–¹æ³•å‘é€messageå³å¯");
        return false;
    }
})();   
</script>
</body>
</html>